import json

def create_lrc_from_data(data):
    """
    JSON 데이터에서 가사 정보를 추출하여 LRC 형식 문자열을 생성합니다.
    시간은 m:ss.xx 형식으로 변환됩니다.
    
    Args:
        data (dict): 'syncLyric' 키를 포함하는 JSON 형태의 딕셔너리.
        
    Returns:
        str: LRC 형식으로 변환된 가사 문자열.
    """
    try:
        start_times = data['syncLyric']['startTimeIndex']['startTimeIndex']
        lyrics = data['syncLyric']['contents']['contents'][0]['text']['text']

        if len(start_times) != len(lyrics):
            return "Error: 시작 시간과 가사 라인의 개수가 일치하지 않습니다."

        lrc_lines = []
        for i in range(len(start_times)):
            start_time_str = start_times[i]
            lyric_text = lyrics[i]
            
            # 시간을 m:ss.xx 형식으로 변환
            total_seconds = float(start_time_str)
            minutes = int(total_seconds // 60)
            seconds = int(total_seconds % 60)
            # 소수점 둘째 자리까지의 밀리초 계산
            milliseconds = int((total_seconds - int(total_seconds)) * 100)
            
            # LRC 형식 문자열 생성: [m:ss.xx] 가사
            lrc_line = f"[{minutes:01d}:{seconds:02d}.{milliseconds:02d}] {lyric_text}"
            lrc_lines.append(lrc_line)
            
        return "\n".join(lrc_lines)

    except KeyError as e:
        return f"Error: 데이터에 필요한 키가 누락되었습니다 - {e}"
    except (ValueError, TypeError) as e:
        return f"Error: 데이터 형식 오류 - {e}"

# 제공된 JSON 데이터
json_data = {
    "syncLyric": {
        "startTimeIndex": {
            "startTimeIndex": [
                "0.0", "2.2", "4.5", "6.8", "9.0", "11.4", "13.6", "16.0", "17.7", "19.1",
                "21.4", "23.9", "26.2", "28.2", "30.8", "32.8", "36.4", "38.7", "41.0", "43.3",
                "45.6", "47.9", "50.2", "52.5", "54.8", "55.6", "57.9", "60.4", "62.7", "64.7",
                "67.4", "69.4", "73.9", "75.6", "76.7", "77.9", "79.1", "81.3", "83.6", "84.7",
                "85.9", "87.0", "88.4", "90.5", "92.2", "93.3", "94.5", "96.7", "99.4", "101.0",
                "101.8", "103.9", "106.2", "107.6", "108.8", "109.9", "111.9", "114.1", "116.5",
                "118.8", "121.0", "123.3", "125.6", "127.9", "128.8", "131.1", "133.3", "135.9",
                "137.9", "140.5", "142.5"
            ]
        },
        "endTimeIndex": {
            "endTimeIndex": [
                "1.0", "3.8", "6.6", "8.8", "10.8", "13.0", "15.6", "17.9", "18.5", "21.1",
                "23.4", "25.8", "28.0", "30.2", "32.6", "35.0", "37.9", "40.3", "43.0", "45.0",
                "47.2", "49.5", "52.2", "54.5", "55.8", "57.7", "59.9", "62.3", "64.6", "66.7",
                "69.0", "71.5", "74.3", "76.4", "77.5", "78.8", "81.0", "83.2", "84.4", "85.5",
                "86.8", "87.9", "90.1", "90.9", "93.0", "94.6", "96.9", "99.2", "101.1", "101.7",
                "103.7", "106.0", "107.9", "109.0", "109.5", "111.5", "113.5", "116.2", "118.5",
                "120.4", "122.7", "125.3", "127.7", "128.7", "130.8", "133.1", "135.5", "137.7",
                "139.8", "142.3", "144.9"
            ]
        },
        "contents": {
            "contents": [
                {
                    "sourceType": "mcp",
                    "generatedType": "gaudio",
                    "languageType": "default",
                    "text": {
                        "text": [
                            "배가 고파서", "밥을 차렸는데", "문득 네가 앉아서", "내 앞에서 웃어서", "멍을 때리다가",
                            "정신 차렸는데", "문득 바보 같아서", "식은 밥이 남아서", "배고파", "나의 밤이 바뀐 건",
                            "살이 많이 빠진 건", "네가 문득 와서잖아", "(I want you to stop coming)", "욕도 했지 나쁜X",
                            "근데 네가 다칠까", "다시 문득 멈추잖아", "밖에 나가서", "주문을 했는데", "문득 네가 앉아서",
                            "네 음식을 골라서", "멍을 때리다가", "전부 시켰는데", "문득 바보 같아서", "너무 많이 남아서",
                            "배고파", "나의 밤이 바뀐 건", "살이 많이 빠진 건", "네가 문득 와서잖아",
                            "(I want you to stop coming)", "욕도 했지 나쁜X", "근데 네가 다칠까", "다시 문득 멈추잖아",
                            "문득", "문득", "문득", "문득", "네가 생각나", "네가 떠올라", "문득", "문득",
                            "문득", "문득", "네가 생각나", "네가 떠올라", "Bad girl", "지금 쓰는 어린 이 곡이",
                            "최선이란 말로는 변명이 안 되니까", "취해서라고 믿고 다음 곡 넘겨줄래", "대뜸 매번 나타나지 마",
                            "어쨌든", "나는 진심이긴 했나 봐", "곡은 잘 나왔는데 너 생각나니까", "짜증 나게 기분이 또 오르내리락",
                            "네 향기들 좀 데려가", "1년째 계속 나니까", "네가 고파서", "너를 찾았는데", "문득 네가 없어서",
                            "모든 게 다 무서워서", "방 안에 숨었다가", "잊었나 했는데", "문득 많이 맡아 본",
                            "네 향기가 또 나서", "잊고파", "나의 밤이 바뀐 건", "살이 많이 빠진 건",
                            "네가 문득 와서잖아", "(I want you to stop coming)", "욕도 했지 나쁜X", "근데 네가 다칠까",
                            "다시 문득 멈추잖아"
                        ]
                    }
                }
            ]
        }
    }
}

# 함수 호출 및 결과 출력
lrc_output = create_lrc_from_data(json_data)
print(lrc_output)